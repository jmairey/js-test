<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>

<link rel="stylesheet" type="text/css" href="PokerHand.css">
<!-- in line version of style sheet
<style type="text/css">
body 
{
    background-color:green;
}
</style>
-->
<style type="text/css">
  div.smallCards{
    border:5px solid;
    border-color:black;

    outline-width: 3px;
    outline-color: white;
    outline-style: groove;


    margin-top: 75px;
    margin-bottom: 75px;

    padding-left: 75px;
    padding-top: 75px;
    padding-bottom: 75px;
  }
</style>

<style type="text/css">
  img.curCard {
    outline-width: 3px;
    outline-color: purple;
    outline-style: groove;
  }
</style>

<script type="text/javascript">
<!--
var gCard0;
var gCard1;
var gCard2;
var gCard3;
var gCard4;

var gCurCard;

var gSmallCards;
var gDeckData;

var gHand0 = [-1,-1,-1,-1,-1];
var gHand1 = [-1,-1,-1,-1,-1];

var gDeck = [
 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,
13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25,
26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38,
39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51,
52,53,
];

function drawCard(hand,index)
{
  var cardIndex;
  var tries = 0;
  do {
    cardIndex = Math.floor(Math.random()*52);
    hand[index] = gDeck[cardIndex];
    tries++;
  } while (hand[index] === -1 && tries < 1000)

  console.log('cardIndex = ', cardIndex);
  console.log('tries = ', tries);
  gDeck[cardIndex] = -1;

  if  (hand[index] === -1) {
    hand[index] = 52;
  }

  return hand[index] < 52;
}

function cardCompare(a,b) {
  //console.log('a =',a);
  //console.log('b =',b);

  return gDeckData[a][0] - gDeckData[b][0];
}

  
function init(){

gPrefix = '../cardimages/small/75/';
gSuffix = '-75.png';
gDeckData = [

[ 0, 'clubs',    'Ace of Clubs',     gPrefix+'clubs-a'+gSuffix ],
[ 1, 'clubs',    '2 of Clubs',       gPrefix+'clubs-2'+gSuffix ],
[ 2, 'clubs',    '3 of Clubs',       gPrefix+'clubs-3'+gSuffix ],
[ 3, 'clubs',    '4 of Clubs',       gPrefix+'clubs-4'+gSuffix ],
[ 4, 'clubs',    '5 of Clubs',       gPrefix+'clubs-5'+gSuffix ],
[ 5, 'clubs',    '6 of Clubs',       gPrefix+'clubs-6'+gSuffix ],
[ 6, 'clubs',    '7 of Clubs',       gPrefix+'clubs-7'+gSuffix ],
[ 7, 'clubs',    '8 of Clubs',       gPrefix+'clubs-8'+gSuffix ],
[ 8, 'clubs',    '9 of Clubs',       gPrefix+'clubs-9'+gSuffix ],
[ 9, 'clubs',    '10 of Clubs',      gPrefix+'clubs-10'+gSuffix],
[10, 'clubs',    'Jack of Clubs',    gPrefix+'clubs-j'+gSuffix ],
[11, 'clubs',    'Queen of Clubs',   gPrefix+'clubs-q'+gSuffix ],
[12, 'clubs',    'King of Clubs',    gPrefix+'clubs-k'+gSuffix ],

[ 0, 'diamonds', 'Ace of Diamonds',  gPrefix+'diamonds-a'+gSuffix ],
[ 1, 'diamonds', '2 of Diamonds',    gPrefix+'diamonds-2'+gSuffix ],
[ 2, 'diamonds', '3 of Diamonds',    gPrefix+'diamonds-3'+gSuffix ],
[ 3, 'diamonds', '4 of Diamonds',    gPrefix+'diamonds-4'+gSuffix ],
[ 4, 'diamonds', '5 of Diamonds',    gPrefix+'diamonds-5'+gSuffix ],
[ 5, 'diamonds', '6 of Diamonds',    gPrefix+'diamonds-6'+gSuffix ],
[ 6, 'diamonds', '7 of Diamonds',    gPrefix+'diamonds-7'+gSuffix ],
[ 7, 'diamonds', '8 of Diamonds',    gPrefix+'diamonds-8'+gSuffix ],
[ 8, 'diamonds', '9 of Diamonds',    gPrefix+'diamonds-9'+gSuffix ],
[ 9, 'diamonds', '10 of Diamonds',   gPrefix+'diamonds-10'+gSuffix],
[10, 'diamonds', 'Jack of Diamonds', gPrefix+'diamonds-j'+gSuffix ],
[11, 'diamonds', 'Queen of Diamonds',gPrefix+'diamonds-k'+gSuffix ],
[12, 'diamonds', 'King of Diamonds', gPrefix+'diamonds-q'+gSuffix ],

[ 0, 'hearts',   'Ace of Hearts',    gPrefix+'hearts-a'+gSuffix ],
[ 1, 'hearts',   '2 of Hearts',      gPrefix+'hearts-2'+gSuffix ],
[ 2, 'hearts',   '3 of Hearts',      gPrefix+'hearts-3'+gSuffix ],
[ 3, 'hearts',   '4 of Hearts',      gPrefix+'hearts-4'+gSuffix ],
[ 4, 'hearts',   '5 of Hearts',      gPrefix+'hearts-5'+gSuffix ],
[ 5, 'hearts',   '6 of Hearts',      gPrefix+'hearts-6'+gSuffix ],
[ 6, 'hearts',   '7 of Hearts',      gPrefix+'hearts-7'+gSuffix ],
[ 7, 'hearts',   '8 of Hearts',      gPrefix+'hearts-8'+gSuffix ],
[ 8, 'hearts',   '9 of Hearts',      gPrefix+'hearts-9'+gSuffix ],
[ 9, 'hearts',   '10 of Hearts',     gPrefix+'hearts-10'+gSuffix],
[10, 'hearts',   'Jack of Hearts',   gPrefix+'hearts-j'+gSuffix ],
[11, 'hearts',   'Queen of Hearts',  gPrefix+'hearts-q'+gSuffix ],
[12, 'hearts',   'King of Hearts',   gPrefix+'hearts-k'+gSuffix ],

[ 0, 'spades',   'Ace of Spades',    gPrefix+'spades-a'+gSuffix ],
[ 1, 'spades',   '2 of Spades',      gPrefix+'spades-2'+gSuffix ],
[ 2, 'spades',   '3 of Spades',      gPrefix+'spades-3'+gSuffix ],
[ 3, 'spades',   '4 of Spades',      gPrefix+'spades-4'+gSuffix ],
[ 4, 'spades',   '5 of Spades',      gPrefix+'spades-5'+gSuffix ],
[ 5, 'spades',   '6 of Spades',      gPrefix+'spades-6'+gSuffix ],
[ 6, 'spades',   '7 of Spades',      gPrefix+'spades-7'+gSuffix ],
[ 7, 'spades',   '8 of Spades',      gPrefix+'spades-8'+gSuffix ],
[ 8, 'spades',   '9 of Spades',      gPrefix+'spades-9'+gSuffix ],
[ 9, 'spades',   '10 of Spades',     gPrefix+'spades-10'+gSuffix],
[10, 'spades',   'Jack of Spades',   gPrefix+'spades-j'+gSuffix ],
[11, 'spades',   'Queen of Spades',  gPrefix+'spades-q'+gSuffix ],
[12, 'spades',   'King of Spades',   gPrefix+'spades-k'+gSuffix ],

[-1, 'joker',    'joker-r',          gPrefix+'joker-b'+gSuffix ],
[-1, 'joker',    'joker-b',          gPrefix+'joker-b'+gSuffix ],

];


  var img;

  drawCard(gHand0,0);
  //drawCard(gHand1,0);
  console.log(gHand0);
  console.log(gDeck);

  drawCard(gHand0,1);
  //drawCard(gHand1,1);
  console.log(gHand0);
  console.log(gDeck);

  drawCard(gHand0,2);
  //drawCard(gHand1,2);
  console.log(gHand0);
  console.log(gDeck);

  drawCard(gHand0,3);
  //drawCard(gHand1,3);
  console.log(gHand0);
  console.log(gDeck);

  drawCard(gHand0,4);
  //drawCard(gHand1,4);
  console.log(gHand0);
  console.log(gDeck);

  gHand0.sort(cardCompare);

  img = document.getElementById('card0');
  img.style.position= 'relative'; 
  img.style.left = '0px'; 
  img.style.bottom = '0px'; 
  img.src = gDeckData[gHand0[0]][3];
  gCard0 = img;

  img = document.getElementById('card1');
  img.style.position= 'relative'; 
  img.style.left = '0px'; 
  img.style.bottom = '0px'; 
  img.src = gDeckData[gHand0[1]][3];
  gCard1 = img;

  img = document.getElementById('card2');
  img.style.position= 'relative'; 
  img.style.left = '0px'; 
  img.style.bottom = '0px'; 
  img.src = gDeckData[gHand0[2]][3];
  gCard2 = img;

  img = document.getElementById('card3');
  img.style.position= 'relative'; 
  img.style.left = '0px'; 
  img.style.bottom = '0px'; 
  img.src = gDeckData[gHand0[3]][3];
  gCard3 = img;

  img = document.getElementById('card4');
  img.style.position= 'relative'; 
  img.style.left = '0px'; 
  img.style.bottom = '0px'; 
  img.src = gDeckData[gHand0[4]][3];
  gCard4 = img;

  gCurCard = gCard0;
  gCurCard.style.zIndex = 1;
  gCurCard.className="curCard";

  gSmallCards = document.getElementById('smallCards');
}
window.onload =init;
//-->
</script>

<script type="text/javascript" src="moveRight.js">
<!--
we got the code out of a file called moveRight.js
//-->
</script>

<script type="text/javascript">
<!--
function moveCardLeft(img,incr){
  var imgOffsetLeft = img.offsetLeft;
  var smallCardsOffsetLeft = gSmallCards.offsetLeft;

  //var imgClientLeft = img.clientLeft;
  //var smallCardsClientLeft = gSmallCards.clientLeft;
  //console.log('img       offsetLeft:',imgOffsetLeft);
  //console.log('container offsetLeft:',smallCardsOffsetLeft);
  //console.log('img       clientLeft:',imgClientLeft);
  //console.log('container clientLeft:',smallCardsClientLeft);

  var left = parseInt(img.style.left);

  if (imgOffsetLeft > smallCardsOffsetLeft+incr) {
      left -= incr;
      //console.log('img left:',left);
      img.style.left = left + 'px';
  } else {
    /*console.log('movement left halted')*/;
  }

}
//-->
</script>

<script type="text/javascript">
<!--
function moveCardUp(img,incr){
  var imgOffsetTop = img.offsetTop;
  var smallCardsOffsetTop = gSmallCards.offsetTop;

  var bottom = parseInt(img.style.bottom);

  if (imgOffsetTop > smallCardsOffsetTop + incr) {
      bottom += incr;
      img.style.bottom = bottom + 'px';
  } else {
    /*console.log('movement up halted')*/;
  }
}
//-->
</script>

<script type="text/javascript">
<!--
function moveCardDown(img,incr){
  var imgOffsetTop = img.offsetTop;
  var imgHeight    = img.offsetHeight;
  var imgOffsetBottom = imgOffsetTop + imgHeight;

  var smallCardsOffsetTop = gSmallCards.offsetTop;
  var smallCardsOffsetHeight = gSmallCards.offsetHeight;
  var smallCardsOffsetBottom = smallCardsOffsetTop + smallCardsOffsetHeight;

  //console.log('img       offsetBottom:',imgOffsetBottom);
  //console.log('container offsetBottom:',smallCardsOffsetBottom);

  var bottom = parseInt(img.style.bottom);

  if (imgOffsetBottom < smallCardsOffsetBottom - incr) {
      bottom -= incr;
      img.style.bottom = bottom + 'px';
  } else {
    /*console.log('movement down halted')*/;
  }
}
//-->
</script>

<script type="text/javascript">
<!--
function setCardCurrent(card){
  gCurCard.style.zIndex = 0;
  gCurCard.className="";

  gCurCard = card;
  gCurCard.style.zIndex = 1;
  gCurCard.className="curCard";
}
//-->
</script>

<script type="text/javascript">
<!--
function swapCardsSrc(cardA,cardB){
  var tmp = cardA.src;
  cardA.src = cardB.src
  cardB.src = tmp;
}
//-->
</script>

<script type="text/javascript">
<!--
function startGame(buttonObj){
  alert(buttonObj.type);
  alert(buttonObj.value);
  var response = prompt('really ready to start game?', 'yes');
  alert(response);
}
//-->
</script>

</head>

<!-- this is a comment... -->

<body>

<h2> here's your poker hand...</h2>

<!--
<div id="bigCards">

<h3> with big images...</h3>

<img src="../cardimages/big/150/clubs-10-150.png" alt="10 of clubs" />

<img src="../cardimages/big/150/hearts-10-150.png" alt="10 of hearts" />

<img src="../cardimages/big/150/diamonds-10-150.png" alt="10 of diamonds" />

<img src="../cardimages/big/150/spades-10-150.png" alt="10 of spades" />

<img src="../cardimages/big/150/hearts-k-150.png" alt="king of hearts" />

</div>
-->

<div id="smallCards" class="smallCards">

<!--
<h3> ...or small images...</h3>
-->


<img id="card0" src="../cardimages/small/75/back-blue-75-3.png"  />

<img id="card1" src="../cardimages/small/75/back-blue-75-3.png"  />

<img id="card2" src="../cardimages/small/75/back-blue-75-3.png"  />

<img id="card3" src="../cardimages/small/75/back-blue-75-3.png"  />

<img id="card4" src="../cardimages/small/75/back-blue-75-3.png"  />

<!--
<p>
<em> emphasized text</em>
<strong> strong text </strong>
</p>
-->

</div>

<div id="firstButtons">
<form>
<input type="button" value="Move Current Card Right" onclick="moveCardRight(gCurCard,10);" />
<input type="button" value="Move Current Card Left " onclick="moveCardLeft(gCurCard,10);" />
<input type="button" value="Move Current Card Up   " onclick="moveCardUp(gCurCard,10);" />
<input type="button" value="Move Current Card Down " onclick="moveCardDown(gCurCard,10);" />
</form>
</div>

<div id="secondButtons">
<form>
<input type="button" value="Make Card0 Currrent    " onclick="setCardCurrent(gCard0);" />
<input type="button" value="Make Card4 Currrent    " onclick="setCardCurrent(gCard4);" />
<input type="button" value="Swap Card0 n Card4 srcs" onclick="swapCardsSrc(gCard0,gCard4);" />
</form>
</div>

<div id="thirdButtons">
<form>
<input type="button" value="Start Game" onclick="startGame(this);" />
</form>
</div>

</body>
</html>
