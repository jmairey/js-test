<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>

    <style type="text/css" media="screen">
      canvas { border: 1px solid; }
    </style>

<link rel="stylesheet" type="text/css" href="PokerHand.css">
<!-- in line version of style sheet
<style type="text/css">
body 
{
    background-color:green;
}
</style>
-->
<style type="text/css">
  div.player0Cards{
    border:5px solid;
    border-color:black;

    outline-width: 3px;
    outline-color: white;
    outline-style: groove;


    margin-top: 15px;
    margin-bottom: 15px;

    padding-left: 45px;
    padding-right: 45px;
    padding-top: 45px;
    padding-bottom: 45px;
  }
</style>

<style type="text/css">
  img.curCard {
    outline-width: 3px;
    outline-color: purple;
    outline-style: groove;
  }
</style>

<script type="text/javascript">
<!--
var gCard0;
var gCard1;
var gCard2;
var gCard3;
var gCard4;

var gCurCard;

var gPlayer0Cards;
var gDeckData;
var gCardsLeftInDeck=52;

var gHand0 = [];
var gHand1 = [];

var gDiscards = [];

var gDeck = [
 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,
13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25,
26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38,
39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51,
52,53,
];

gCardValueIndex = 0;
gCardSuitIndex = 1;
gCardNameIndex = 2;
gCardFilenameIndex = 3;

gPrefix = '../cardimages/small/75/';
gSuffix = '-75.png';
gDeckData = [

[13, 'clubs',    'Ace of Clubs',     gPrefix+'clubs-a'+gSuffix ],
[ 1, 'clubs',    'Two of Clubs',     gPrefix+'clubs-2'+gSuffix ],
[ 2, 'clubs',    'Three of Clubs',   gPrefix+'clubs-3'+gSuffix ],
[ 3, 'clubs',    'Four of Clubs',    gPrefix+'clubs-4'+gSuffix ],
[ 4, 'clubs',    'Five of Clubs',    gPrefix+'clubs-5'+gSuffix ],
[ 5, 'clubs',    'Six of Clubs',     gPrefix+'clubs-6'+gSuffix ],
[ 6, 'clubs',    'Seven of Clubs',   gPrefix+'clubs-7'+gSuffix ],
[ 7, 'clubs',    'Eight of Clubs',   gPrefix+'clubs-8'+gSuffix ],
[ 8, 'clubs',    'Nine of Clubs',    gPrefix+'clubs-9'+gSuffix ],
[ 9, 'clubs',    'Ten of Clubs',     gPrefix+'clubs-10'+gSuffix],
[10, 'clubs',    'Jack of Clubs',    gPrefix+'clubs-j'+gSuffix ],
[11, 'clubs',    'Queen of Clubs',   gPrefix+'clubs-q'+gSuffix ],
[12, 'clubs',    'King of Clubs',    gPrefix+'clubs-k'+gSuffix ],

[13, 'diamonds', 'Ace of Diamonds',  gPrefix+'diamonds-a'+gSuffix ],
[ 1, 'diamonds', 'Two of Diamonds',  gPrefix+'diamonds-2'+gSuffix ],
[ 2, 'diamonds', 'Three of Diamonds',gPrefix+'diamonds-3'+gSuffix ],
[ 3, 'diamonds', 'Four of Diamonds', gPrefix+'diamonds-4'+gSuffix ],
[ 4, 'diamonds', 'Five of Diamonds', gPrefix+'diamonds-5'+gSuffix ],
[ 5, 'diamonds', 'Six of Diamonds',  gPrefix+'diamonds-6'+gSuffix ],
[ 6, 'diamonds', 'Seven of Diamonds',gPrefix+'diamonds-7'+gSuffix ],
[ 7, 'diamonds', 'Eight of Diamonds',gPrefix+'diamonds-8'+gSuffix ],
[ 8, 'diamonds', 'Nine of Diamonds', gPrefix+'diamonds-9'+gSuffix ],
[ 9, 'diamonds', 'Ten of Diamonds',  gPrefix+'diamonds-10'+gSuffix],
[10, 'diamonds', 'Jack of Diamonds', gPrefix+'diamonds-j'+gSuffix ],
[11, 'diamonds', 'Queen of Diamonds',gPrefix+'diamonds-q'+gSuffix ],
[12, 'diamonds', 'King of Diamonds', gPrefix+'diamonds-k'+gSuffix ],

[13, 'hearts',   'Ace of Hearts',    gPrefix+'hearts-a'+gSuffix ],
[ 1, 'hearts',   'Two of Hearts',    gPrefix+'hearts-2'+gSuffix ],
[ 2, 'hearts',   'Three of Hearts',  gPrefix+'hearts-3'+gSuffix ],
[ 3, 'hearts',   'Four of Hearts',   gPrefix+'hearts-4'+gSuffix ],
[ 4, 'hearts',   'Five of Hearts',   gPrefix+'hearts-5'+gSuffix ],
[ 5, 'hearts',   'Six of Hearts',    gPrefix+'hearts-6'+gSuffix ],
[ 6, 'hearts',   'Seven of Hearts',  gPrefix+'hearts-7'+gSuffix ],
[ 7, 'hearts',   'Eight of Hearts',  gPrefix+'hearts-8'+gSuffix ],
[ 8, 'hearts',   'Nine of Hearts',   gPrefix+'hearts-9'+gSuffix ],
[ 9, 'hearts',   'Ten of Hearts',    gPrefix+'hearts-10'+gSuffix],
[10, 'hearts',   'Jack of Hearts',   gPrefix+'hearts-j'+gSuffix ],
[11, 'hearts',   'Queen of Hearts',  gPrefix+'hearts-q'+gSuffix ],
[12, 'hearts',   'King of Hearts',   gPrefix+'hearts-k'+gSuffix ],

[13, 'spades',   'Ace of Spades',    gPrefix+'spades-a'+gSuffix ],
[ 1, 'spades',   'Two of Spades',    gPrefix+'spades-2'+gSuffix ],
[ 2, 'spades',   'Three of Spades',  gPrefix+'spades-3'+gSuffix ],
[ 3, 'spades',   'Four of Spades',   gPrefix+'spades-4'+gSuffix ],
[ 4, 'spades',   'Five of Spades',   gPrefix+'spades-5'+gSuffix ],
[ 5, 'spades',   'Six of Spades',    gPrefix+'spades-6'+gSuffix ],
[ 6, 'spades',   'Seven of Spades',  gPrefix+'spades-7'+gSuffix ],
[ 7, 'spades',   'Eight of Spades',  gPrefix+'spades-8'+gSuffix ],
[ 8, 'spades',   'Nine of Spades',   gPrefix+'spades-9'+gSuffix ],
[ 9, 'spades',   'Ten of Spades',    gPrefix+'spades-10'+gSuffix],
[10, 'spades',   'Jack of Spades',   gPrefix+'spades-j'+gSuffix ],
[11, 'spades',   'Queen of Spades',  gPrefix+'spades-q'+gSuffix ],
[12, 'spades',   'King of Spades',   gPrefix+'spades-k'+gSuffix ],

[-1, 'joker',    'joker-r',          gPrefix+'joker-b'+gSuffix ],
[-1, 'joker',    'joker-b',          gPrefix+'joker-b'+gSuffix ],

];

function drawCard(hand)
{
  var cardIndex = Math.floor(Math.random()*gCardsLeftInDeck);

  if (cardIndex === gCardsLeftInDeck) {
    hand.push(52); // joker. should never happen
  } else {
    hand.push(gDeck.splice(cardIndex,1)[0]);
    gCardsLeftInDeck -= 1;
  }

  //console.log('cardIndex = ', cardIndex);
  //console.log('hand = ', hand);

}

function discardHand(hand)
{
  if (hand && hand.length === 5) {
    gDiscards.push(hand[0],hand[1],hand[2],hand[3],hand[4]);
    hand.pop(); 
    hand.pop(); 
    hand.pop(); 
    hand.pop(); 
    hand.pop();
  }
}

function returnDiscards() {

  var i;
  for (i = 0; i < gDiscards.length; i++) {
    gDeck.splice(0,0,gDiscards[i]); // can't just push, want them ahead of the jokers
    gCardsLeftInDeck += 1;
  }
  gDiscards = [];

  gDeck.sort(indexCompare);
}

function cardCompare(a,b) {
  return gDeckData[a][0] - gDeckData[b][0];
}

function deal(hand0, hand1){
  //console.log("gDeck = ",gDeck);
  var i;
  for (i = 0; i < 5; i++) {
    drawCard(hand0);
    drawCard(hand1);
  }

  hand0.sort(cardCompare);
  hand1.sort(cardCompare);

  //console.log(hand0);
  //console.log(hand1);

  //console.log("gDeck = ",gDeck);
}

function redCardBack(buttonObj) {
  alert(buttonObj.type);
}

function anteAndDealHands(buttonObj) {
  //alert(buttonObj.value);

  discardHand(gHand0);
  discardHand(gHand1);

  returnDiscards();

  deal(gHand0, gHand1);

  resetCardPositions();

  var gameDirections = document.getElementById("gameDirections");
  gameDirections.innerHTML = "select cards to discard then hit Call or Fold..."

  document.getElementById('player0Result').innerHTML = "your hand analysis "
  document.getElementById('computerResult').innerHTML = "computer hand analysis "
}

function discardCurrentCard(buttonObj) {
  //alert(buttonObj.value);
  if (gCurCard) {
    if        (gCurCard === gCard0) {
      //alert("discard Card 0");
      if (gHand0[0] < 52) {
        gCard0.src = "../cardimages/small/75/back-blue-75-3.png";
        gDiscards.push(gHand0[0]);
        gHand0[0] = 52;
      }
    } else if (gCurCard === gCard1) {
      //alert("discard Card 1");
      if (gHand0[1] < 52) {
        gCard1.src = "../cardimages/small/75/back-blue-75-3.png";
        gDiscards.push(gHand0[1]);
        gHand0[1] = 52;
      }
    } else if (gCurCard === gCard2) {
      //alert("discard Card 2");
      if (gHand0[2] < 52) {
        gCard2.src = "../cardimages/small/75/back-blue-75-3.png";
        gDiscards.push(gHand0[2]);
        gHand0[2] = 52;
      }
    } else if (gCurCard === gCard3) {
      //alert("discard Card 3");
      if (gHand0[3] < 52) {
        gCard3.src = "../cardimages/small/75/back-blue-75-3.png";
        gDiscards.push(gHand0[3]);
        gHand0[3] = 52;
      }
    } else if (gCurCard === gCard4) {
      //alert("discard Card 4");
      if (gHand0[4] < 52) {
        gCard4.src = "../cardimages/small/75/back-blue-75-3.png";
        gDiscards.push(gHand0[4]);
        gHand0[4] = 52;
      }
    }
  }
}

function doneDiscard(buttonObj) {
  //alert(buttonObj.value);

  var i;
  var cardIndex;
  for (i = 0; i < 5; i++) {
    if (gHand0[i] === 52) {
      cardIndex = Math.floor(Math.random()*gCardsLeftInDeck);

      if (cardIndex !== gCardsLeftInDeck) {
        gHand0[i] = cardIndex;
        gCardsLeftInDeck -= 1;
      }
    }
  }

  gHand0.sort(cardCompare);

  resetCardPositions();
}

function foldHand(buttonObj) {
  alert(buttonObj.value);
  callGame(buttonObj)
}

function init(){

  var img;

  img = document.getElementById('card0');
  img.style.position= 'relative'; 
  img.style.left = '0px'; 
  img.style.bottom = '0px'; 
  gCard0 = img;

  img = document.getElementById('card1');
  img.style.position= 'relative'; 
  img.style.left = '0px'; 
  img.style.bottom = '0px'; 
  gCard1 = img;

  img = document.getElementById('card2');
  img.style.position= 'relative'; 
  img.style.left = '0px'; 
  img.style.bottom = '0px'; 
  gCard2 = img;

  img = document.getElementById('card3');
  img.style.position= 'relative'; 
  img.style.left = '0px'; 
  img.style.bottom = '0px'; 
  gCard3 = img;

  img = document.getElementById('card4');
  img.style.position= 'relative'; 
  img.style.left = '0px'; 
  img.style.bottom = '0px'; 
  gCard4 = img;

  gPlayer0Cards = document.getElementById('player0Cards');

}

window.onload =init;
//-->
</script>

<script type="text/javascript" src="moveRight.js">
<!--
// we got the code out of a file called moveRight.js
//-->
</script>

<script type="text/javascript">
<!--
function moveCardLeft(img,incr){
  var imgOffsetLeft = img.offsetLeft;
  var player0CardsOffsetLeft = gPlayer0Cards.offsetLeft;

  //var imgClientLeft = img.clientLeft;
  //var player0CardsClientLeft = gPlayer0Cards.clientLeft;
  //console.log('img       offsetLeft:',imgOffsetLeft);
  //console.log('container offsetLeft:',player0CardsOffsetLeft);
  //console.log('img       clientLeft:',imgClientLeft);
  //console.log('container clientLeft:',player0CardsClientLeft);

  var left = parseInt(img.style.left);

  if (imgOffsetLeft > player0CardsOffsetLeft+incr) {
      left -= incr;
      //console.log('img left:',left);
      img.style.left = left + 'px';
  } else {
    /*console.log('movement left halted')*/;
  }

}
//-->
</script>

<script type="text/javascript">
<!--
function moveCardUp(img,incr){
  var imgOffsetTop = img.offsetTop;
  var player0CardsOffsetTop = gPlayer0Cards.offsetTop;

  var bottom = parseInt(img.style.bottom);

  if (imgOffsetTop > player0CardsOffsetTop + incr) {
      bottom += incr;
      img.style.bottom = bottom + 'px';
  } else {
    /*console.log('movement up halted')*/;
  }
}
//-->
</script>

<script type="text/javascript">
<!--
function moveCardDown(img,incr){
  var imgOffsetTop = img.offsetTop;
  var imgHeight    = img.offsetHeight;
  var imgOffsetBottom = imgOffsetTop + imgHeight;

  var player0CardsOffsetTop = gPlayer0Cards.offsetTop;
  var player0CardsOffsetHeight = gPlayer0Cards.offsetHeight;
  var player0CardsOffsetBottom = player0CardsOffsetTop + player0CardsOffsetHeight;

  //console.log('img       offsetBottom:',imgOffsetBottom);
  //console.log('container offsetBottom:',player0CardsOffsetBottom);

  var bottom = parseInt(img.style.bottom);

  if (imgOffsetBottom < player0CardsOffsetBottom - incr) {
      bottom -= incr;
      img.style.bottom = bottom + 'px';
  } else {
    /*console.log('movement down halted')*/;
  }
}
//-->
</script>

<script type="text/javascript">
<!--
function setOrToggleCurrentCard(card){
  if (gCurCard) {
    if (gCurCard !== card) {
      gCurCard.style.zIndex = 0;
      gCurCard.className="";

      gCurCard = card;
      gCurCard.style.zIndex = 1;
      gCurCard.className="curCard";
    } else {
      gCurCard.style.zIndex = 0;
      gCurCard.className="";
      gCurCard = undefined;
    }

  } else if (card) {
    gCurCard = card;
    gCurCard.style.zIndex = 1;
    gCurCard.className="curCard";
  }
}
//-->
</script>

<script type="text/javascript">
<!--

function indexCompare(a,b) {
  return a - b;
}

function resetCardPositions() {
  var img;

  img = document.getElementById('card0');
  img.style.position= 'relative'; 
  img.style.left = '0px'; 
  img.style.bottom = '0px'; 
  img.src = gDeckData[gHand0[0]][3];

  img = document.getElementById('card1');
  img.style.position= 'relative'; 
  img.style.left = '0px'; 
  img.style.bottom = '0px'; 
  img.src = gDeckData[gHand0[1]][3];

  img = document.getElementById('card2');
  img.style.position= 'relative'; 
  img.style.left = '0px'; 
  img.style.bottom = '0px'; 
  img.src = gDeckData[gHand0[2]][3];

  img = document.getElementById('card3');
  img.style.position= 'relative'; 
  img.style.left = '0px'; 
  img.style.bottom = '0px'; 
  img.src = gDeckData[gHand0[3]][3];

  img = document.getElementById('card4');
  img.style.position= 'relative'; 
  img.style.left = '0px'; 
  img.style.bottom = '0px'; 
  img.src = gDeckData[gHand0[4]][3];

  img = document.getElementById('player1card0');
  //img.src = "../cardimages/small/75/back-blue-75-3.png";
  img.src = gDeckData[gHand1[0]][3];

  img = document.getElementById('player1card1');
  //img.src = "../cardimages/small/75/back-blue-75-3.png";
  img.src = gDeckData[gHand1[1]][3];

  img = document.getElementById('player1card2');
  //img.src = "../cardimages/small/75/back-blue-75-3.png";
  img.src = gDeckData[gHand1[2]][3];

  img = document.getElementById('player1card3');
  //img.src = "../cardimages/small/75/back-blue-75-3.png";
  img.src = gDeckData[gHand1[3]][3];

  img = document.getElementById('player1card4');
  //img.src = "../cardimages/small/75/back-blue-75-3.png";
  img.src = gDeckData[gHand1[4]][3];

  setOrToggleCurrentCard(gCurCard);
}

function callGame(buttonObj){
  //alert(buttonObj.type);
  //alert(buttonObj.value);
  //var response = prompt('really ready to start game?', 'yes');
  //alert(response);

  resetCardPositions();


  var player0Result = analyzeHand(gHand0);
  setResultHTML(player0Result,document.getElementById('player0Result'));

  var computerResult = analyzeHand(gHand1);
  setResultHTML(computerResult,document.getElementById('computerResult'));

  var gameDirections = document.getElementById("gameDirections");
  if (player0Result.handType === computerResult.handType) {
    if (player0Result.handRank === computerResult.handRank) {
      if (player0Result.handRank2 === computerResult.handRank2) {
        gameDirectionText = 'split the pot...';
      } else if (player0Result.handRank2 > computerResult.handRank2) {
        gameDirectionText = 'you won with ' + document.getElementById('player0Result').innerText;
      } else if (player0Result.handRank2 < computerResult.handRank2) {
        gameDirectionText = 'you lost against ' + document.getElementById('computerResult').innerText;
      } else {
        gameDirectionText = '!!! need to fix a bug in our code to figure out who won...';
      }
    } else if (player0Result.handRank > computerResult.handRank) {
      gameDirectionText = 'you won with ' + document.getElementById('player0Result').innerText;
    } else if (player0Result.handRank < computerResult.handRank) {
      gameDirectionText = 'you lost against ' + document.getElementById('computerResult').innerText;
    } else {
        gameDirectionText = '!! need to fix a bug in our code to figure out who won...';
    }
  } else if (player0Result.handType > computerResult.handType) {
    gameDirectionText = 'you won with ' + document.getElementById('player0Result').innerText;
  } else if (player0Result.handType < computerResult.handType) {
    gameDirectionText = 'you lost against ' + document.getElementById('computerResult').innerText;
  } else {
      gameDirectionText = '! need to fix a bug in our code to figure out who won...';
  }
  gameDirections.innerHTML = gameDirectionText;

}
//-->
</script>

<script type="text/javascript">
<!--
function handleCard0Click(){
  setOrToggleCurrentCard(gCard0);
}

function handleCard1Click(){
  setOrToggleCurrentCard(gCard1);
}

function handleCard2Click(){
  setOrToggleCurrentCard(gCard2);
}

function handleCard3Click(){
  setOrToggleCurrentCard(gCard3);
}

function handleCard4Click(){
  setOrToggleCurrentCard(gCard4);
}
//-->
</script>

<script type="text/javascript">
<!--
function analyzeHand(hand){
  // we assume the hand is sorted..

  var result = { 
    handType:  -1, 
    handRank:  -1,
    handRank2: -1, // rank of the low pair in a full house or two pair
    card0: -1,
    card1: -1,
    card2: -1,
    card3: -1,
    card4: -1,
  };


  // using javascript property of variables being undefined by default which is 'falsy'
  var pair1; // starts out undefined...
  var pair2;
  var pair3;
  var pair4;

  var twopair1;
  var twopair2;
  var twopair3;

  var triple1;
  var triple2;
  var triple3;

  var flush;

  var straight;


  // have at least a single high card
  result.handType = 0;
  result.handRank = gDeckData[hand[4]][0];
  result.card0 = hand[4];

  // look for pairs first, then build bottom up from there
  if (gDeckData[hand[0]][0] === gDeckData[hand[1]][0]){
    pair1 = true;
    result.handType = 1;
    result.handRank = gDeckData[hand[0]][0];
    result.card0 = hand[0];
    result.card1 = hand[1];
  }

  if (gDeckData[hand[1]][0] === gDeckData[hand[2]][0]){
    pair2 = true;
    result.handType = 1;
    result.handRank = gDeckData[hand[1]][0];
    result.card0 = hand[1];
    result.card1 = hand[2];
  }

  if (gDeckData[hand[2]][0] === gDeckData[hand[3]][0]){
    pair3 = true;
    result.handType = 1;
    result.handRank = gDeckData[hand[2]][0];
    result.card0 = hand[2];
    result.card1 = hand[3];
  }

  if (gDeckData[hand[3]][0] === gDeckData[hand[4]][0]){
    pair4 = true;
    result.handType = 1;
    result.handRank = gDeckData[hand[3]][0];
    result.card0 = hand[3];
    result.card1 = hand[4];
  }

  // two pairs ?
  if (pair1 && pair3) {
    result.handType = 2;
    result.handRank = gDeckData[hand[2]][0];
    result.handRank2 = gDeckData[hand[0]][0];
    result.card0 = hand[0];
    result.card1 = hand[1];
    result.card2 = hand[2];
    result.card3 = hand[3];
  }

  if (pair2 && pair4) {
    result.handType = 2;
    result.handRank = gDeckData[hand[3]][0];
    result.handRank2 = gDeckData[hand[1]][0];
    result.card0 = hand[1];
    result.card1 = hand[2];
    result.card2 = hand[3];
    result.card3 = hand[4];
  }
  
  if (pair1 && pair4) {
    result.handType = 2;
    result.handRank = gDeckData[hand[3]][0];
    result.handRank2 = gDeckData[hand[0]][0];
    result.card0 = hand[0];
    result.card1 = hand[1];
    result.card2 = hand[3];
    result.card3 = hand[4];
  }

  // three of a kind ?
  if (pair1 && pair2) {
    triple1 = true;
    result.handType = 3;
    result.handRank = gDeckData[hand[0]][0];
    result.card0 = hand[0];
    result.card1 = hand[1];
    result.card2 = hand[2];
  }
  if (pair2 && pair3) {
    triple2 = true;
    result.handType = 3;
    result.handRank = gDeckData[hand[1]][0];
    result.card0 = hand[1];
    result.card1 = hand[2];
    result.card2 = hand[3];
  }
  if (pair3 && pair4) {
    triple3 = true;
    result.handType = 3;
    result.handRank = gDeckData[hand[2]][0];
    result.card0 = hand[2];
    result.card1 = hand[3];
    result.card2 = hand[4];
  }

  // full house ?
  if (pair1 && triple3){
    result.handType = 6;
    result.handRank = gDeckData[hand[2]][0];
    result.handRank2 = gDeckData[hand[0]][0];
    result.card0 = hand[0]; 
    result.card1 = hand[1];
    result.card2 = hand[2];
    result.card3 = hand[3];
    result.card4 = hand[4];
  }
  if (triple1 && pair4){
    result.handType = 6;
    result.handRank = gDeckData[hand[0]][0];
    result.handRank2 = gDeckData[hand[3]][0];
    result.card0 = hand[0]; 
    result.card1 = hand[1];
    result.card2 = hand[2];
    result.card3 = hand[3];
    result.card4 = hand[4];
  }

  // straight ?
  if (gDeckData[hand[0]][0] === gDeckData[hand[1]][0] - 1 &&
      gDeckData[hand[1]][0] === gDeckData[hand[2]][0] - 1 &&
      gDeckData[hand[2]][0] === gDeckData[hand[3]][0] - 1 &&
      gDeckData[hand[3]][0] === gDeckData[hand[4]][0] - 1) {
    straight = true;
    result.handType = 4;
    result.handRank = gDeckData[hand[4]][0];
    result.handRank2 = gDeckData[hand[3]][0];
    result.card0 = hand[0];  
    result.card1 = hand[1];
    result.card2 = hand[2];
    result.card3 = hand[3];
    result.card4 = hand[4];
  }
  // ace low straight
  if (gDeckData[hand[0]][0] === 13 &&
      gDeckData[hand[1]][0] ===  1 &&
      gDeckData[hand[2]][0] ===  2 &&
      gDeckData[hand[3]][0] ===  3 &&
      gDeckData[hand[4]][0] ===  4) {
    straight = true;
    result.handType = 4;
    result.handRank = gDeckData[hand[0]][0];
    result.handRank2 = gDeckData[hand[4]][0];
    result.card0 = hand[0]; 
    result.card1 = hand[1];
    result.card2 = hand[2];
    result.card3 = hand[3];
    result.card4 = hand[4];
  }

  // flush ?
  if (gDeckData[hand[0]][1] === gDeckData[hand[1]][1] &&
      gDeckData[hand[1]][1] === gDeckData[hand[2]][1] &&
      gDeckData[hand[2]][1] === gDeckData[hand[3]][1] &&
      gDeckData[hand[3]][1] === gDeckData[hand[4]][1]) {
    flush = true;
    result.handType = 5;
    result.handRank = gDeckData[hand[4]][0];
    result.card0 = hand[0];   // start with highest value card?
    result.card1 = hand[1];
    result.card2 = hand[2];
    result.card3 = hand[3];
    result.card4 = hand[4];
  }


  // straight flush ?
  if (straight && flush) {
    result.handType = 8;
    result.handRank = gDeckData[hand[1]][0];
  }
  // four of a kind ? (use else-if since we checked for straight flush)
  else if (pair1 && pair2 && pair3) { 
    result.handType = 7;
    result.handRank = gDeckData[hand[0]][0];
    result.card0 = hand[0];
    result.card1 = hand[1];
    result.card2 = hand[2];
    result.card3 = hand[3];
  } else if (pair2 && pair3 && pair4) {
    result.handType = 7;
    result.handRank = gDeckData[hand[1]][0];
    result.card0 = hand[1];
    result.card1 = hand[2];
    result.card2 = hand[3];
    result.card3 = hand[4];
  }

  return result;

}

function setResultHTML(result,resultElement) {
  var resultText;

  if (result.handType === 8) {
    resultText = 'straightflush';
  } else if (result.handType === 7) {
    resultText = 'four of a kind';
  } else if (result.handType === 6) {
    resultText = 'full house';
  } else if (result.handType === 5) {
    resultText = 'flush';
  } else if (result.handType === 4) {
    resultText = 'straight';
  } else if (result.handType === 3) {
    resultText = 'three of a kind: ' + gDeckData[result.card0][2] +
                                ', ' + gDeckData[result.card1][2] +
                                ', ' + gDeckData[result.card2][2];
  } else if (result.handType === 2) {
    resultText = 'two pair : ' + gDeckData[result.card0][2] +
                          ', ' + gDeckData[result.card1][2] +
                          ', ' + gDeckData[result.card2][2] +
                          ', ' + gDeckData[result.card3][2];
  } else if (result.handType === 1) {
    resultText = 'one pair: ' + gDeckData[result.card0][2] + 
                         ', ' + gDeckData[result.card1][2];
  } else {
    resultText = 'single high card: ' + gDeckData[result.card0][2];
  }

  resultElement.innerHTML = resultText;
}

//-->
</script>

</head>

<!-- this is a comment... -->

<body>

<h2 id="gameDirections"> 
click Ante and Deal Hands to start...
</h2>

<div id="player0Cards" class="player0Cards">

<img id="card0" src="../cardimages/small/75/back-blue-75-3.png" onclick="handleCard0Click();" />

<img id="card1" src="../cardimages/small/75/back-blue-75-3.png" onclick="handleCard1Click();" />

<img id="card2" src="../cardimages/small/75/back-blue-75-3.png" onclick="handleCard2Click();" />

<img id="card3" src="../cardimages/small/75/back-blue-75-3.png" onclick="handleCard3Click();" />

<img id="card4" src="../cardimages/small/75/back-blue-75-3.png" onclick="handleCard4Click();" />

</div>

<div id="movementButtons">
<form>
<input type="button" value="Move Card Left " onclick="moveCardLeft(gCurCard,10);" />
<input type="button" value="Move Card Right" onclick="moveCardRight(gCurCard,10);" />
<input type="button" value="Move Card Up   " onclick="moveCardUp(gCurCard,10);" />
<input type="button" value="Move Card Down " onclick="moveCardDown(gCurCard,10);" />
</form>
</div>

<div id="playButtons">
<form>
<input type="button" value="Start: Ante and Deal Hands" onclick="anteAndDealHands(this);" />
<input type="button" value="Discard Selected Card" onclick="discardCurrentCard(this);" />
<input type="button" value="Done Discard" onclick="doneDiscard(this);" />
<input type="button" value="Fold" onclick="foldHand(this);" />
<input type="button" value="Call" onclick="callGame(this);" />
</form>
</div>

<div id="player1Cards" class="player1Cards">

<h3 id="player0msg">
and another hand (yep, allowing it to be seen for now)
</h3>

<img id="player1card0" src="../cardimages/small/75/back-blue-75-3.png" />
<img id="player1card1" src="../cardimages/small/75/back-blue-75-3.png" />
<img id="player1card2" src="../cardimages/small/75/back-blue-75-3.png" />
<img id="player1card3" src="../cardimages/small/75/back-blue-75-3.png" />
<img id="player1card4" src="../cardimages/small/75/back-blue-75-3.png" />

<h3 id="player0Result">
your hand analysis 
</h3>
<h3 id="computerResult">
computer hand analysis 
</h3>

</div>

<style type="text/css">
#cardButton1 
{
    background-color: green;
    padding: 10px;
    border-bottom-style: none;
    border-top-style: none;
    border-left-style: none;
    border-right-style: none;
    border: 0px;
}
</style>

<div id="fourthButtons">
    <button id = "cardButton1" onclick="redCardBack(this);"  >
        <img src="../cardimages/small/75/back-red-75-3.png"  />
    </button>
</div>

<div>
    <canvas id="pokerCanvas" width="320" height="240">
    </canvas>
</div>



</body>
</html>
